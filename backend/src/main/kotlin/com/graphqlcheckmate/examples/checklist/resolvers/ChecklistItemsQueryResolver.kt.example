// EXAMPLE: Query All Checklist Items Resolver
//
// This file demonstrates how to implement a list query resolver using the framework.
//
// KEY CONCEPTS DEMONSTRATED:
// - Querying all resources accessible to the current user
// - RLS automatic filtering (only returns items user can access)
// - Mapping lists of entities to GraphQL types
// - Generating GlobalIDs for each item
//
// TO USE THIS EXAMPLE:
// 1. Copy to backend/src/main/kotlin/com/graphqlcheckmate/resolvers/
// 2. Rename to YourResourcesQueryResolver.kt
// 3. Uncomment the code below
// 4. Customize for your resource type

/*
package com.graphqlcheckmate.resolvers

import com.graphqlcheckmate.resolvers.resolverbases.QueryResolvers
import viaduct.api.Resolver
import viaduct.api.grts.ChecklistItem

/**
 * Resolver for the checklistItems query.
 * Returns all checklist items from groups the authenticated user is a member of.
 *
 * Authorization: Database RLS policies automatically filter results based on group membership.
 * The query only returns items from groups where is_group_member(group_id) returns true.
 */
@Resolver
class ChecklistItemsQueryResolver : QueryResolvers.ChecklistItems() {
    override suspend fun resolve(ctx: Context): List<ChecklistItem> {
        // Fetch all items accessible to the user
        // RLS policies automatically filter the results
        val itemEntities = ctx.authenticatedClient.getChecklistItems()

        // Map database entities to GraphQL types
        return itemEntities.map { entity ->
            ChecklistItem.Builder(ctx)
                .id(ctx.globalIDFor(ChecklistItem.Reflection, entity.id))
                .title(entity.title)
                .completed(entity.completed)
                .userId(entity.user_id)
                .groupId(entity.group_id)
                .createdAt(entity.created_at)
                .updatedAt(entity.updated_at)
                .build()
        }
    }
}
*/
